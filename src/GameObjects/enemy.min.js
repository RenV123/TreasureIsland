import{Vector2D}from"../Helpers/vector2D.js";import{colorShade,PathWayFinder,getRandomNr,shuffleArray}from"../Helpers/helperlib.js";import{GameObject,DrawTypes}from"./gameObject.js";export class Enemy extends GameObject{type=DrawTypes.CIRCLE;color="#F94144";whiteListedTiles=["Grass"];_intelligence=75;constructor(e,t,s,r,i,o){super(s,r,i,o),this._gameboard=e,this._treasureHunter=t}moveToTreasureHunter(){let e=new PathWayFinder(this._gameboard,this.whiteListedTiles).findShortestPath(this.pos,this._treasureHunter.pos);if(getRandomNr(0,100)>this._intelligence||0==e.goodPaths.length){let t=shuffleArray([this._gameboard.getTile(this.x+1,this.y),this._gameboard.getTile(this.x-1,this.y),this._gameboard.getTile(this.x,this.y+1),this._gameboard.getTile(this.x,this.y-1)]).find((t=>t&&this.whiteListedTiles.includes(t.constructor.name)&&t.x!=e.goodPaths?.[0]?.[1]?.x&&t.y!=e.goodPaths?.[0]?.[1]?.y));t&&(this.x=t.x,this.y=t.y),t.color="darkred"}else if(e.goodPaths?.[0]?.length>0){this.x=e.goodPaths[0][1].x,this.y=e.goodPaths[0][1].y;let t="#99c247";e.goodPaths.reverse().forEach((e=>{t=colorShade(t,10),e.forEach((e=>{this._gameboard.getTile(e.x,e.y).color=t}))}))}}}