import{Vector2D}from"../Helpers/vector2D.js";import{colorShade,PathWayFinder,getRandomNr,shuffleArray}from"../Helpers/helperlib.js";import{GameObject,DrawTypes}from"./gameObject.js";export class Enemy extends GameObject{type=DrawTypes.IMG;color="#F94144";whiteListedTiles=["Grass"];constructor(e,t,s,i,o,r,h=75){super(s,i,o,r),this._gameboard=e,this._treasureHunter=t,this._intelligence=h,this.imgSrc="./img/tile-enemy-1.webp"}moveToTreasureHunter(){let e=new PathWayFinder(this._gameboard,this.whiteListedTiles).findShortestPath(this.pos,this._treasureHunter.pos),t=getRandomNr(0,100);if(window.DEBUG_MODE&&e.listOfCheckedSpots.forEach((e=>{this._gameboard.getTile(e.x,e.y).color="#7EB356"})),t>this._intelligence||0==e.goodPaths.length){let t=shuffleArray([this._gameboard.getTile(this.x+1,this.y),this._gameboard.getTile(this.x-1,this.y),this._gameboard.getTile(this.x,this.y+1),this._gameboard.getTile(this.x,this.y-1)]).find((t=>t&&this.whiteListedTiles.includes(t.constructor.name)&&t.x!=e.goodPaths?.[0]?.[1]?.x&&t.y!=e.goodPaths?.[0]?.[1]?.y));t&&(this.x=t.x,this.y=t.y,window.DEBUG_MODE&&(t.color="darkred"))}else if(e.goodPaths?.[0]?.length>0&&(this.x=e.goodPaths[0][1].x,this.y=e.goodPaths[0][1].y,window.DEBUG_MODE)){let t="#99c24750";e.goodPaths.reverse().forEach((e=>{t=colorShade(t,10),e.forEach((e=>{this._gameboard.getTile(e.x,e.y).color=t}))}))}}}